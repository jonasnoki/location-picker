{"version":3,"sources":["parkPolygon.js","parkPolygonInverse.js","Map.js","App.js","index.js"],"names":["parkPolygon","parkPolygonInverse","mapboxgl","workerClass","require","default","accessToken","Map","mapContainerRef","useRef","useState","lng","setLng","lat","setLat","zoom","setZoom","useEffect","sw","LngLat","ne","lngLatBounds","LngLatBounds","map","container","current","style","center","maxBounds","on","getZoom","toFixed","addSource","addLayer","marker","Marker","draggable","color","setLngLat","addTo","geolocateControl","GeolocateControl","positionOptions","enableHighAccuracy","showUserLocation","e","lngLat","coords","longitude","latitude","isLngLatInPark","window","alert","addControl","getLngLat","point","lngLatToPoint","vertices","explode","nearest","nearestPoint","pointToLngLat","findClosestLngLatInPark","geometry","coordinates","pointInPolygon","remove","className","ref","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.91e3828c.chunk.js","sourcesContent":["export const parkPolygon =\n    {\n        \"type\": \"Polygon\",\n        \"coordinates\": [\n            [\n                [\n                    11.584737087755258,\n                    48.14523752133243\n                ],\n                [\n                    11.584981130403037,\n                    48.14770714362746\n                ],\n                [\n                    11.58465574021028,\n                    48.14995955264982\n                ],\n                [\n                    11.586079322305295,\n                    48.150366603974135\n                ],\n                [\n                    11.587462230627978,\n                    48.15240181216558\n                ],\n                [\n                    11.588601096305439,\n                    48.152727437986016\n                ],\n                [\n                    11.589821309529412,\n                    48.15540169821762\n                ],\n                [\n                    11.590158353131216,\n                    48.157562216451254\n                ],\n                [\n                    11.591257845227886,\n                    48.158075631735926\n                ],\n                [\n                    11.592577235744443,\n                    48.15990921580931\n                ],\n                [\n                    11.59362175323588,\n                    48.16100933479785\n                ],\n                [\n                    11.596095610454398,\n                    48.162806145075905\n                ],\n                [\n                    11.597085153341595,\n                    48.1628794829339\n                ],\n                [\n                    11.600218705817838,\n                    48.16093599426608\n                ],\n                [\n                    11.601648045543897,\n                    48.15965251798434\n                ],\n                [\n                    11.602912461456185,\n                    48.158075631735926\n                ],\n                [\n                    11.6036271313192,\n                    48.15704879602876\n                ],\n                [\n                    11.6014730982983,\n                    48.157462596848546\n                ],\n                [\n                    11.598265321794997,\n                    48.1552335255453\n                ],\n                [\n                    11.597084681832115,\n                    48.15333130811996\n                ],\n                [\n                    11.595770384514765,\n                    48.151830289906\n                ],\n                [\n                    11.595059663223793,\n                    48.1511887225102\n                ],\n                [\n                    11.593959779033298,\n                    48.152732223901296\n                ],\n                [\n                    11.59373221678689,\n                    48.15359251600165\n                ],\n                [\n                    11.592632332596366,\n                    48.15359251600165\n                ],\n                [\n                    11.591797937693087,\n                    48.152757526815776\n                ],\n                [\n                    11.591608302488538,\n                    48.15212495020526\n                ],\n                [\n                    11.591797937693087,\n                    48.15139115156725\n                ],\n                [\n                    11.592139281062828,\n                    48.1504043023717\n                ],\n                [\n                    11.593428800457758,\n                    48.15048021452213\n                ],\n                [\n                    11.59373221678689,\n                    48.150935685066\n                ],\n                [\n                    11.594073560156545,\n                    48.150935685066\n                ],\n                [\n                    11.594339049443704,\n                    48.15055612656025\n                ],\n                [\n                    11.594263195361094,\n                    48.149645174692296\n                ],\n                [\n                    11.594111487197182,\n                    48.14921499735567\n                ],\n                [\n                    11.594225268320457,\n                    48.14901255971429\n                ],\n                [\n                    11.594339049443704,\n                    48.14873420665353\n                ],\n                [\n                    11.59373221678689,\n                    48.148354631865146\n                ],\n                [\n                    11.592670259637032,\n                    48.14746894644125\n                ],\n                [\n                    11.592803004279517,\n                    48.14670977534024\n                ],\n                [\n                    11.592935748924162,\n                    48.14595059301112\n                ],\n                [\n                    11.592404770349901,\n                    48.144735877925655\n                ],\n                [\n                    11.590470491256099,\n                    48.14392605189764\n                ],\n                [\n                    11.588877555532065,\n                    48.143546441548864\n                ],\n                [\n                    11.587360473890556,\n                    48.14347051914214\n                ],\n                [\n                    11.587891452464874,\n                    48.14448280866452\n                ],\n                [\n                    11.585615830002638,\n                    48.14493833243628\n                ],\n                [\n                    11.584971070305158,\n                    48.1441538167596\n                ],\n                [\n                    11.584136675401822,\n                    48.14440688764279\n                ],\n                [\n                    11.584737087755258,\n                    48.14523752133243\n                ]\n            ],\n        ]\n\n    };","export const parkPolygonInverse =\n    {\n        'type': 'geojson',\n        'data': {\n            'type': 'Feature',\n            'geometry': {\n\n                \"type\": \"Polygon\",\n                \"coordinates\": [\n                    [\n                        [-180,90],\n                        [180, 90],\n                        [180, -90],\n                        [-180, -90],\n                        [-180,90],\n                    ],\n                    [\n                        [\n                            11.584737087755258,\n                            48.14523752133243\n                        ],\n                        [\n                            11.584981130403037,\n                            48.14770714362746\n                        ],\n                        [\n                            11.58465574021028,\n                            48.14995955264982\n                        ],\n                        [\n                            11.586079322305295,\n                            48.150366603974135\n                        ],\n                        [\n                            11.587462230627978,\n                            48.15240181216558\n                        ],\n                        [\n                            11.588601096305439,\n                            48.152727437986016\n                        ],\n                        [\n                            11.589821309529412,\n                            48.15540169821762\n                        ],\n                        [\n                            11.590158353131216,\n                            48.157562216451254\n                        ],\n                        [\n                            11.591257845227886,\n                            48.158075631735926\n                        ],\n                        [\n                            11.592577235744443,\n                            48.15990921580931\n                        ],\n                        [\n                            11.59362175323588,\n                            48.16100933479785\n                        ],\n                        [\n                            11.596095610454398,\n                            48.162806145075905\n                        ],\n                        [\n                            11.597085153341595,\n                            48.1628794829339\n                        ],\n                        [\n                            11.600218705817838,\n                            48.16093599426608\n                        ],\n                        [\n                            11.601648045543897,\n                            48.15965251798434\n                        ],\n                        [\n                            11.602912461456185,\n                            48.158075631735926\n                        ],\n                        [\n                            11.6036271313192,\n                            48.15704879602876\n                        ],\n                        [\n                            11.6014730982983,\n                            48.157462596848546\n                        ],\n                        [\n                            11.598265321794997,\n                            48.1552335255453\n                        ],\n                        [\n                            11.597084681832115,\n                            48.15333130811996\n                        ],\n                        [\n                            11.595770384514765,\n                            48.151830289906\n                        ],\n                        [\n                            11.595059663223793,\n                            48.1511887225102\n                        ],\n                        [\n                            11.593959779033298,\n                            48.152732223901296\n                        ],\n                        [\n                            11.59373221678689,\n                            48.15359251600165\n                        ],\n                        [\n                            11.592632332596366,\n                            48.15359251600165\n                        ],\n                        [\n                            11.591797937693087,\n                            48.152757526815776\n                        ],\n                        [\n                            11.591608302488538,\n                            48.15212495020526\n                        ],\n                        [\n                            11.591797937693087,\n                            48.15139115156725\n                        ],\n                        [\n                            11.592139281062828,\n                            48.1504043023717\n                        ],\n                        [\n                            11.593428800457758,\n                            48.15048021452213\n                        ],\n                        [\n                            11.59373221678689,\n                            48.150935685066\n                        ],\n                        [\n                            11.594073560156545,\n                            48.150935685066\n                        ],\n                        [\n                            11.594339049443704,\n                            48.15055612656025\n                        ],\n                        [\n                            11.594263195361094,\n                            48.149645174692296\n                        ],\n                        [\n                            11.594111487197182,\n                            48.14921499735567\n                        ],\n                        [\n                            11.594225268320457,\n                            48.14901255971429\n                        ],\n                        [\n                            11.594339049443704,\n                            48.14873420665353\n                        ],\n                        [\n                            11.59373221678689,\n                            48.148354631865146\n                        ],\n                        [\n                            11.592670259637032,\n                            48.14746894644125\n                        ],\n                        [\n                            11.592803004279517,\n                            48.14670977534024\n                        ],\n                        [\n                            11.592935748924162,\n                            48.14595059301112\n                        ],\n                        [\n                            11.592404770349901,\n                            48.144735877925655\n                        ],\n                        [\n                            11.590470491256099,\n                            48.14392605189764\n                        ],\n                        [\n                            11.588877555532065,\n                            48.143546441548864\n                        ],\n                        [\n                            11.587360473890556,\n                            48.14347051914214\n                        ],\n                        [\n                            11.587891452464874,\n                            48.14448280866452\n                        ],\n                        [\n                            11.585615830002638,\n                            48.14493833243628\n                        ],\n                        [\n                            11.584971070305158,\n                            48.1441538167596\n                        ],\n                        [\n                            11.584136675401822,\n                            48.14440688764279\n                        ],\n                        [\n                            11.584737087755258,\n                            48.14523752133243\n                        ]\n                    ],\n                ]\n\n            }\n        }\n    };","import React, {useRef, useEffect, useState} from 'react';\nimport {parkPolygon} from \"./parkPolygon\";\nimport {parkPolygonInverse} from \"./parkPolygonInverse\";\nimport pointInPolygon from \"@turf/boolean-point-in-polygon\";\nimport explode from \"@turf/explode\";\nimport nearestPoint from \"@turf/nearest-point\";\nimport mapboxgl from 'mapbox-gl';\nimport './Map.css';\n\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nmapboxgl.workerClass = require('worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker').default;\nmapboxgl.accessToken = \"pk.eyJ1Ijoiam9uYXNub2tpIiwiYSI6ImNrbWdraHRncDNmdTEyeWtuaW53bzUwaXMifQ._HxmVnG4t4A_1QEaddeAAQ\";\n\nconst Map = () => {\n    const mapContainerRef = useRef(null);\n\n    const [lng, setLng] = useState(11.5899);\n    const [lat, setLat] = useState(48.1496);\n    const [zoom, setZoom] = useState(13.41);\n\n    // Initialize map when component mounts\n    useEffect(() => {\n        const sw = new mapboxgl.LngLat(5, 40);\n        const ne = new mapboxgl.LngLat(16, 55);\n        const lngLatBounds = new mapboxgl.LngLatBounds(sw, ne);\n\n        const map = new mapboxgl.Map({\n            container: mapContainerRef.current,\n            style: 'mapbox://styles/mapbox/light-v10',\n            center: [lng, lat],\n            zoom: zoom,\n            maxBounds: lngLatBounds,\n        });\n\n\n        map.on('move', () => {\n            setZoom(map.getZoom().toFixed(2));\n        });\n\n        map.on('load', function () {\n            map.addSource('park', parkPolygonInverse);\n\n            map.addLayer({\n                'id': 'park',\n                'type': 'fill',\n                'source': 'park',\n                'layout': {},\n                'paint': {\n                    'fill-color': '#000000',\n                    'fill-opacity': 0.6\n                }\n            });\n        });\n\n\n        const marker = new mapboxgl.Marker({\n            draggable: true,\n            color: '#000000',\n        }).setLngLat([lng, lat]).addTo(map);\n\n\n        const geolocateControl = new mapboxgl.GeolocateControl({\n            positionOptions: {\n                enableHighAccuracy: true\n            },\n            showUserLocation: false\n        });\n\n        geolocateControl.on('geolocate', (e) => {\n            const lngLat = {lng: e.coords.longitude, lat: e.coords.latitude};\n            if (!isLngLatInPark(lngLat)) {\n                window.alert(\"Your position is outside our delivery zone! :(\")\n            } else {\n                marker.setLngLat(lngLat);\n                setLng(lngLat.lng)\n                setLat(lngLat.lat)\n            }\n        })\n\n        map.addControl(\n            geolocateControl\n        );\n\n        const findClosestLngLatInPark = (lngLat) => {\n            const point = lngLatToPoint(lngLat);\n            const vertices = explode(parkPolygon)\n            const nearest = nearestPoint(point, vertices)\n            return pointToLngLat(nearest);\n        }\n\n        marker.on('drag', () => {\n            let lngLat = marker.getLngLat()\n            if (!isLngLatInPark(lngLat)) {\n                lngLat = findClosestLngLatInPark(lngLat);\n                marker.setLngLat(lngLat)\n            }\n            setLng(lngLat.lng)\n            setLat(lngLat.lat)\n\n        })\n        // marker.on('dragend', onDragEnd);\n        const pointToLngLat = (point) => {\n            return {\n                lng: point.geometry.coordinates[0],\n                lat: point.geometry.coordinates[1]\n            }\n        }\n\n        const lngLatToPoint = (lngLat) => {\n            return {\n                \"type\": \"Point\",\n                \"coordinates\": [lngLat.lng, lngLat.lat]\n            }\n        }\n\n        const isLngLatInPark = (lngLat) => {\n            const point = lngLatToPoint(lngLat);\n            return pointInPolygon(point, parkPolygon)\n        }\n\n        map.on('click', (e) => {\n            const lngLat = e.lngLat;\n            if (isLngLatInPark(lngLat)) {\n                setLng(lngLat.lng)\n                setLat(lngLat.lat)\n                marker.setLngLat(lngLat);\n            }\n        })\n\n\n        // Clean up on unmount\n        return () => map.remove();\n    }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return (\n        <div>\n            <div className='sidebarStyle'>\n                <div>\n                    Longitude: {lng} | Latitude: {lat} | Zoom: {zoom}\n                </div>\n            </div>\n            <div className='map-container' ref={mapContainerRef}/>\n        </div>\n    );\n};\n\nexport default Map;\n","import React from 'react';\nimport Map from './Map';\n\nfunction App() {\n  return (\n    <div>\n      <Map />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}